document.addEventListener('DOMContentLoaded',function(){let iscDeactivateLinks=document.querySelectorAll('#deactivate-isc, #deactivate-image-source-control-isc, #deactivate-image-source-control');iscDeactivateLinks.forEach(link=>{link.addEventListener('click',function(e){if(document.querySelectorAll('#deactivate-isc, #deactivate-image-source-control-isc, #deactivate-image-source-control').length>1){return}
e.preventDefault();iscDeactivateLinkUrl=this.getAttribute('href');var cValue=iscFeedbackGetCookie("isc_hide_deactivate_feedback");if(cValue===undefined){document.querySelector('#isc-feedback-overlay').style.display='block';document.querySelector('#isc-feedback-content textarea').focus()}else{window.location.href=iscDeactivateLinkUrl}})});document.querySelector('#isc-feedback-send-reply').addEventListener('click',function(){document.querySelector('#isc-feedback-reply-email').style.display='block'});document.querySelectorAll('#isc-feedback-content .button').forEach(button=>{button.addEventListener('click',function(e){e.preventDefault();iscStoreFeedbackCookie();document.querySelector('#isc-feedback-content form').style.display='none';if(this.classList.contains('isc-feedback-submit')){document.querySelector('#isc-feedback-after-submit').style.display='block';let formData=new FormData(document.querySelector('#isc-feedback-content form'));formData.append('action','isc_send_feedback');fetch(ajaxurl,{method:'POST',headers:{'Content-Type':'application/x-www-form-urlencoded',},body:new URLSearchParams(formData).toString()}).finally(()=>{setTimeout(()=>{document.querySelector('#isc-feedback-overlay').remove()},2000)
window.location.href=iscDeactivateLinkUrl})}else{document.querySelector('#isc-feedback-overlay').remove();window.location.href=iscDeactivateLinkUrl}})});document.querySelector('#isc-feedback-overlay-close-button').addEventListener('click',function(){document.querySelector('#isc-feedback-overlay').style.display='none'})});function iscFeedbackGetCookie(name){const cookies=document.cookie.split(';');for(let cookie of cookies){const[cookieName,cookieValue]=cookie.split('=').map(c=>c.trim());if(cookieName===name){return decodeURIComponent(cookieValue)}}}
function iscStoreFeedbackCookie(){const expiry_date=new Date();expiry_date.setSeconds(expiry_date.getSeconds()+2592000);document.cookie="isc_hide_deactivate_feedback=1; expires="+expiry_date.toUTCString()+"; path=/"}